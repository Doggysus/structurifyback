pluginManagement {
	repositories {
		gradlePluginPortal()
		maven { url "https://maven.fabricmc.net/" }
		maven { url "https://maven.architectury.dev/" }
		maven { url "https://files.minecraftforge.net/maven/" }
		maven { url "https://maven.kikugie.dev/releases" }
		maven { url "https://maven.kikugie.dev/snapshots" }
	}
}

plugins {
	id "dev.kikugie.stonecutter" version "0.4-beta.1"
}

rootProject.name = 'structurify'

/*
def dists = ["common", "fabric", "forge", "neoforge"]
include(*dists)

stonecutter {
	shared {
		versions '1.20.1', '1.20.2'
	}

	dists.forEach {
		create(project(":$it"))
	}

	create(rootProject)
}*/

Map<String, String> dists = new HashMap<String, List<String>>() {
	{
		put("common", Arrays.asList("1.20.1", "1.20.2", "1.20.4"));
		put("fabric", Arrays.asList("1.20.1", "1.20.2", "1.20.4"));
		put("forge", Arrays.asList("1.20.1", "1.20.2"));
		put("neoforge", Arrays.asList("1.20.2", "1.20.4"));
	}
};

stonecutter {
	for (def dist : dists) {
		def platform = dist.getKey();
		def platformVersions = dist.getValue()

		include(platform)

		shared {
			versions(platformVersions)
		}

		create(project(":$platform"))
	}

	shared {
		versions '1.20.1', '1.20.2', '1.20.4'
	}

	create(rootProject)
}